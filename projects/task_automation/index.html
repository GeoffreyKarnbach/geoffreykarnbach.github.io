<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Task automation | Geoffrey Karnbach </title> <meta name="author" content="Geoffrey Karnbach"> <meta name="description" content="Effortlessly schedule and manage your Python scripts without the hassle of cron jobs!"> <meta name="keywords" content="geoffrey karnbach, dergoyote, geoffrey karnbach portfolio, LÄNDR, Recipe Planer"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%98%8E&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://geoffreykarnbach.github.io/projects/task_automation/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Geoffrey</span> Karnbach </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">News </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/github/">GitHub </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Task automation</h1> <p class="post-description">Effortlessly schedule and manage your Python scripts without the hassle of cron jobs!</p> </header> <article> <h4 id="source-code">Source code</h4> <p><a href="https://github.com/GeoffreyKarnbach/TaskAutomation" rel="external nofollow noopener" target="_blank">Go to the GitHub repository!</a></p> <h4 id="usage-of-the-tool">Usage of the tool</h4> <p>Often, it is very usefull to be able to execute a same task every day/hour, in a repeated way, in order to backup data for instance or mesure values. The “Task Automation Tool” is meant to be run on a computer, that is powered on 24/7. <br><br> Each task, that the server should execute on a regular basis, is defined by a single folder in the “Tasks” directory:</p> <h4 id="how-to-create-a-new-task">How to create a new Task:</h4> <p>To create a new task, you will need to create a subdirectory in “Tasks” with following structure: <br><br></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Tasks
↳ TASKNAME
  ↳ main.py
  ↳ config.ini
  ↳ requirements.txt
  ↳ Output
    ↳ ...
</code></pre></div></div> <p>Each file has a specific role:</p> <ul> <li> <p>main.py: This file will contain the code to be run by the program. It has to contain at least two predefined functions, used by the scheduler:</p> <ul> <li> <strong>main()</strong>: This function is run everytime the task is triggered.<br> </li> <li> <strong>initialize()</strong>: This function returns a string and can be used to initialize values. The returned string is written to the logs and makes sure that this task has been sucessfully loaded.</li> </ul> </li> <li> <p>config.ini: This file will contain two main sections, each containing different important fields for the scheduler to be able to configure the task execution:</p> <ul> <li>“EveryXMinutes” (in “Frequency” section): This field takes a positive integer, representing the amount of minutes, that have to pass between two executions of the task.</li> <li>“AllowedFrom” (in “Frequency” section): This field takes a time of format HH:MM, and it indicates the beginning of the period, where the task is allowed to be run.</li> <li>“AllowedTo” (in “Frequency” section): This field takes a time of format HH:MM, and it indicates the end of the period, where the task is allowed to be run. <br><br> </li> <li>“Enabled” (in “Global” section): This field takes a value (“True”/”False”) and indicates, wether a task should be loaded by the scheduler at program start.</li> <li>“Testing” (in “Global” section): This field takes a value (“True”/”False”) and indicates, wether a task should be run normally or in test mode (=only logging a run confirmation but no “main” function execution).</li> <li>“RunOnStartup” (in “Global” section): This field takes a value (“True”/”False”) and indicates, wether a task should be auto run once at scheduler launch/startup.</li> </ul> </li> </ul> <p><br></p> <ul> <li> <p>requirements.txt: This file will contain a list of all python modules, that pip need to install, in order to be able to run this specific task. The file should be compatible with the command <u><strong>pip install -r requirements.txt</strong></u>.</p> </li> <li> <p>Ouput: This is a folder, that the main.py file should automatically generate, if it needs to output some files (for instance results of a backup / test).</p> </li> </ul> <p><br></p> <p>It is possible for the user to use several files/modules, for instance a file called “module1.py” can be added in the subdirectory. In order to be able to import it, following import statement has to be used in the main.py file:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">Tasks.TASKNAME.module1</span> <span class="k">as</span> <span class="n">module1</span>
</code></pre></div></div> <h4 id="example-task-1-spotifybackup">Example task 1: “SpotifyBackup”</h4> <p>This sample task (that I had in use for over a year on my local instance), allows the user to regurlarly (for instance once a day) make a backup of all songs inside of the “Liked Songs Playlist” and the “Mix of the week”. Through this approach, songs can be persisted (as the Mix of the Week is deleted at the start of each week and replaced with new songs).</p> <p>The main task is in the main function (execute subfunction), and allows the user to replace the “PLAYLIST_SHARE_LINK” by his own link for any playlist (for instance the Mix of the Week).</p> <p>The configuration of the Task in the “config.ini” file indicates that the Task should be run every 24 hours, but between the time of 2 to 4 AM (to ensure to use the internet when least used in the day on average). Furthermore, the task is active, not in test mode and does not run on startup of the Task Automation tool.</p> <p>All the dependencies required by python are located in the “requirements.txt” file, which are automatically installed by the Task Automation tool.</p> <h4 id="how-to-terminate-the-program-for-maintenance-for-instance">How to terminate the program (for maintenance for instance)</h4> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 terminate.py
</code></pre></div></div> <h4 id="how-to-start-the-program-using-ssh-on-a-remote-machine-with-tmux">How to start the program using SSH on a remote machine (with tmux)</h4> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tmux
python3 main.py
tmux detach
<span class="nb">exit</span>
</code></pre></div></div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Geoffrey Karnbach. Last updated: July 21, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-news",title:"News",description:"",section:"Navigation",handler:()=>{window.location.href="/news/"}},{id:"nav-projects",title:"Projects",description:"A selection of some of my projects",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-github",title:"GitHub",description:"",section:"Navigation",handler:()=>{window.location.href="/github/"}},{id:"nav-cv",title:"CV",description:"TODO",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"projects-cryptopay",title:"CryptoPay",description:"CryptoPay, a simple initiative to allow paying with cryptocurrencies in a physical location, as simply as with a credit card.",section:"Projects",handler:()=>{window.location.href="/projects/cryptopay/"}},{id:"projects-fake-news-detector-ai",title:"Fake News Detector AI",description:"Detect if a specific article is a fake news or not.",section:"Projects",handler:()=>{window.location.href="/projects/fake_news_detector/"}},{id:"projects-gym-companion-app",title:"Gym Companion App",description:"Transform your workouts with the Gym Companion App \u2013 track, analyze, and optimize your progress seamlessly!",section:"Projects",handler:()=>{window.location.href="/projects/gym_companion_app/"}},{id:"projects-jeffos",title:"JeffOS",description:"JeffOS, an interactive and educational virtual CPU and OS environment!",section:"Projects",handler:()=>{window.location.href="/projects/jeff_os/"}},{id:"projects-l\xe4ndr",title:"L\xe4ndr",description:"Your go-to platform for easily finding and booking the best party locations.",section:"Projects",handler:()=>{window.location.href="/projects/laendr/"}},{id:"projects-python-datastructures",title:"Python Datastructures",description:"Collection of self-implemented datastructure with python, including a Queue, Stack, BST, Hashmap, LL, Heap...",section:"Projects",handler:()=>{window.location.href="/projects/python_datastructures/"}},{id:"projects-recipe-planer",title:"Recipe Planer",description:"Your all-in-one digital cookbook and smart grocery planner for seamless meal preparation and shopping!",section:"Projects",handler:()=>{window.location.href="/projects/recipe_planer/"}},{id:"projects-spotify-language-detection",title:"Spotify Language Detection",description:"Effortlessly organize your Spotify playlist by song language with our own language detection model.",section:"Projects",handler:()=>{window.location.href="/projects/spotify_language_detection/"}},{id:"projects-task-automation",title:"Task automation",description:"Effortlessly schedule and manage your Python scripts without the hassle of cron jobs!",section:"Projects",handler:()=>{window.location.href="/projects/task_automation/"}},{id:"projects-titanic-survival-analysis",title:"Titanic Survival Analysis",description:"Titanic Survival Analysis - Will John Doe survive the titanic?",section:"Projects",handler:()=>{window.location.href="/projects/titanic_survival_analysis/"}},{id:"projects-vienna-subway-simulation",title:"Vienna Subway Simulation",description:"Vienna Subway Simulation - Navigate Vienna&#39;s subway like a pro with our simulation, powered by the Dijkstra Algorithm for the shortest routes!",section:"Projects",handler:()=>{window.location.href="/projects/vienna_subway_simulation/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%67%65%6F%66%66%72%65%79.%6B%61%72%6E%62%61%63%68@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/GeoffreyKarnbach","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/geoffrey-karnbach-b849101b9","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>