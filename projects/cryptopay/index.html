<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> CryptoPay | Geoffrey Karnbach </title> <meta name="author" content="Geoffrey Karnbach"> <meta name="description" content="CryptoPay, a simple initiative to allow paying with cryptocurrencies in a physical location, as simply as with a credit card."> <meta name="keywords" content="geoffrey karnbach, dergoyote, geoffrey karnbach portfolio, LÄNDR, Recipe Planer"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%98%8E&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://geoffreykarnbach.github.io/projects/cryptopay/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Geoffrey</span> Karnbach </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">news </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">CryptoPay</h1> <p class="post-description">CryptoPay, a simple initiative to allow paying with cryptocurrencies in a physical location, as simply as with a credit card.</p> </header> <article> <h4 id="source-code">Source code</h4> <p><a href="https://github.com/GeoffreyKarnbach/CryptoPay" rel="external nofollow noopener" target="_blank">Go to the GitHub repository!</a></p> <h4 id="concept">Concept</h4> <p>CryptoPay was supposed to be a tool-suite, allowing customers to pay using cryptocurrencies (for instance Bitcoins) through a cryptocurrency provider (such as Bitget, Bitpanda, Coinbase…) with close to no effort. Sellpoints (supermarkets, barbers, restaurants…) are able to register in the CryptoPay ecosystem, and integrate our simple payment system into their payment options.</p> <h4 id="workflow">Workflow</h4> <p>In order for a customer to pay at a given sellpoint with CryptoPay, following steps have (or would have) to be taken, with further details about their technical implementation later:</p> <ul> <li>A sellpoint has to register in our ecosystem (through a website / customer support)</li> <li>During the registration process, the sellpoint has to go through a KYC (“Know your customer”) Process, and provide information, amongst them their address, name and a related crypto-wallet ID (similar to IBAN in online banking, each account at a cryptocurrency provider, such as coinbase, has an ID, that can identify it). Any transactions that are directed to the given crypto-wallet ID are expected to have been generated using CryptoPay and will later be subject to fees, once a certain threshhold has been met.</li> <li>In the Backend, the system registers the new sellpoint, and starts tracking any incoming payments to the given Walled ID.</li> <li>The sellpoint can now use the web-application, for instance on mobile phones of employees, to initiate a new payment. A QR Code, containing the target wallet ID and the payment amount is generated and displayed on the screen.</li> <li>The customer, who needs to use the CryptoPay Customer web-application on their mobile phone, can now interact with the payment request. The customer needs to scan the QR-code on the sellpoint web-application, and is automatically redirected to the crypto-currency provider, to whom the wallet ID is associated, prefilling the transfer form, therefore only requiring the customer to confirm the payment to the wallet ID.</li> <li>On the web-application of the sellpoint, once the customer has payed through the cryptocurrency provider, a payment verification can be started. If the payment for the given amount can be verified, the sellpoint can finalize their payment in their custom system, for instance by printing out a receipt.</li> <li>Our internal Billing service checks continuously if any payment has been made to any of the registered wallet IDs and tracks them accordingly, to later on require a fee to the sellpoints.</li> </ul> <p>The customer can use the system entirely for free, the sellpoints pay a percentage of their income through CryptoPay as a fee, gradually decreasing as their income increased (&lt;10k yearly: Free, &lt;20k yearly: 3%, &lt;50k yearly: 2%, &lt;250k yearly: 1%, above: custom fee, contact the sales team). The fee is payed through a yearly bill to the sellpoint.</p> <h4 id="technical-implementation">Technical Implementation</h4> <p>CryptoPay has been implemented as a MVP (minimal viable product) in under a week. The system is working, but does not offer any security measures according to industry standards. Any user interfaces are not final, and just allow for a working prototype.</p> <p>The current implementation should be considered as PoC (Proof of Concept), but would require throrough work to be able to use it in productive environment.</p> <h4 id="components"> <u>Components</u>:</h4> <h5 id="billing-service">Billing Service:</h5> <p>Microservice written in python with the flask framework. It supports the registration of a new customer to the payment tracking, and a periodic request to “Coinbase_Proto”, our own cryptocurrency provider mock. It could make use of callbacks, if supported by any used cryptocurrency provider, to continously track new incoming payments. The payments are not persisted into a database, but should be if used.</p> <h5 id="business-app">Business App:</h5> <p>Frontend and Backend, both related to the web-application that the sellpoints would use. The Backend is written with Python and the Flask Framework, the Frontend with Typescript and Angular. The Business App can initiate new payments, generate QR codes on the backend, and check if new transactions with the given amount have been registered in “Coinbase_Proto”. Furthemore, the frontend allows to go through an entire payment process on the sellpoint side (initiate payment intent =&gt; generate QR code =&gt; scan QR code of customer =&gt; check for incoming payment).</p> <h5 id="coinbase-proto">Coinbase Proto:</h5> <p>Frontend and Backend, that serve as a mock for actual cryptocurrency provider / broker (Coinbase, Bitpanda, Bitget…). The Backend is written with Python and the Flask Framework, the Frontend with Typescript and Angular. Only the minimal features are implemented, such as a simple login, a payment page to transfer cryptocurrencies from a wallet A to a wallet B (that can be prefilled!), and a transaction history (both for incoming and outgoing transactions). The Coinbase_Proto is used by all the systems in CryptoPay (either through its frotend or its integrated easy to use API). In a real use case, the Coinbase_Proto would have to be replaced by an actual cryptocurrency provider, that supports are least following features:</p> <ul> <li>Payment from wallet A to B - ideally with the ability to prefill forms</li> <li>Transaction History (reachable through free API) - ideally with callbacks</li> <li>Fast transaction speed - the shorter, the better</li> </ul> <p>In a concrete implementation, several cryptocurrency provider can be supported at the same time in a productive CryptoPay instance.</p> <h5 id="customer-app">Customer App:</h5> <p>Frontend, related to the web-application that the sellpoints would use. The Frontend is written with Typescript and Angular. The application is able to read a QR code from another device currently serving the business app, and therefore redirect the user to the frontend of the Coinbase_Proto (or any actual cryptocurrency providers, such as Coinbase). Furthermore, the customer app can also display a QR Code of the wallet ID of the customer, allowing the business app to know, which wallet ID to expect the payment from.</p> <h2 id="disclaimer-a-newer-version-of-the-mvp-with-further-functionality-has-yet-to-be-pushed-to-github-the-functionality-will-be-described-in-the-readme-file-as-well">DISCLAIMER: A newer version of the MVP with further functionality has yet to be pushed to GitHub. The functionality will be described in the readme file as well.</h2> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Geoffrey Karnbach. Last updated: July 13, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-news",title:"news",description:"",section:"Navigation",handler:()=>{window.location.href="/news/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"Projects",description:"A selection of some of my presentable \ud83d\ude0e projects",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"TODO",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"projects-cryptopay",title:"CryptoPay",description:"CryptoPay, a simple initiative to allow paying with cryptocurrencies in a physical location, as simply as with a credit card.",section:"Projects",handler:()=>{window.location.href="/projects/cryptopay/"}},{id:"projects-gym-companion-app",title:"Gym Companion App",description:"Transform your workouts with the Gym Companion App \u2013 track, analyze, and optimize your progress seamlessly!",section:"Projects",handler:()=>{window.location.href="/projects/gym_companion_app/"}},{id:"projects-jeffos",title:"JeffOS",description:"JeffOS, an interactive and educational virtual CPU and OS environment!",section:"Projects",handler:()=>{window.location.href="/projects/jeff_os/"}},{id:"projects-recipe-planer",title:"Recipe Planer",description:"Your all-in-one digital cookbook and smart grocery planner for seamless meal preparation and shopping!",section:"Projects",handler:()=>{window.location.href="/projects/recipe_planer/"}},{id:"projects-spotify-language-detection",title:"Spotify Language Detection",description:"Effortlessly organize your Spotify playlist by song language with our own language detection model.",section:"Projects",handler:()=>{window.location.href="/projects/spotify_language_detection/"}},{id:"projects-task-automation",title:"Task automation",description:"Effortlessly schedule and manage your Python scripts without the hassle of cron jobs!",section:"Projects",handler:()=>{window.location.href="/projects/task_automation/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%67%65%6F%66%66%72%65%79.%6B%61%72%6E%62%61%63%68@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/GeoffreyKarnbach","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/geoffrey-karnbach-b849101b9","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>