<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> JeffOS | Geoffrey Karnbach </title> <meta name="author" content="Geoffrey Karnbach"> <meta name="description" content="JeffOS, an interactive and educational virtual CPU and OS environment!"> <meta name="keywords" content="geoffrey karnbach, dergoyote, geoffrey karnbach portfolio, LÄNDR, Recipe Planer"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%98%8E&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://geoffreykarnbach.github.io/projects/jeff_os/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Geoffrey</span> Karnbach </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">News </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/github/">GitHub </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">JeffOS</h1> <p class="post-description">JeffOS, an interactive and educational virtual CPU and OS environment!</p> </header> <article> <h4 id="source-code">Source code</h4> <p><a href="https://github.com/GeoffreyKarnbach/JeffOS" rel="external nofollow noopener" target="_blank">Go to the GitHub repository!</a></p> <h4 id="description">Description</h4> <p>This project simulates a processor with its own RAM and ROM (each being a simple array, of different sizes, RAM with 1024 int fields (1 kInt), ROM with 8192 int field (8 kInt). In order to program the CPU to run operations, customs programs can be written in an own assembly like language.</p> <p>For more information on the different commands, take a look at “INSTRUCTIONS”.</p> <h4 id="implementation">Implementation</h4> <p>On a high level, a new processor is created with an RAM and ROM instance, and the processor is passed to a dispatcher object, that is responsible for scheduling the execution of programs. The programs get run by being executed command after command by the dispatcher (a program must be a valid codefile embedded in a process).</p> <h4 id="component-description"><u>Component description</u></h4> <h5 id="rom-more-like-a-harddrive">ROM (more like a harddrive):</h5> <p>Data can be written and read from the ROM, an array of up to 8192 integers, zero’ed at startup. The instructions READ and WRITE can be used to interact with the ROM. Right now, the main usage of the ROM is to output into a persistent storage, that doesn’t get overwritten by another process if the data would be in the RAM. Furthermore, complex programs could free RAM (lower capacity) by copying the data to the ROM.</p> <p>Possible improvements:</p> <ul> <li>Add overhead to perform IO operations (read / write) on ROM, to emulate actual latencies</li> <li>Persist ROM across program restarts into a file, saved on the machine</li> </ul> <h5 id="ram-random-access-memory">RAM (Random-Access Memory)</h5> <p>Similat to ROM, data can be written and read to and from the RAM. The RAM is implemented as an array of 1024 integers. Each position can be freely accessed using the LOAD and STORE instructions.</p> <h5 id="semaphore-synchronisation">Semaphore (Synchronisation)</h5> <p>In order to be able to perform critical computations in a multi-cored system, semaphores can be used. By owning a semaphore, a process can ensure, that no other process can at the same time access resources guarded by the given semaphore.</p> <p>Each semaphore object has a value and a queue of waiting processes. If a process requests the semaphore (WAIT), the process reduces the semaphore by 1 and if it is equal to 0, it can proceed. If the value of the semaphore now is smaller than 0, the process is blocked and added to the queue. The process automatically gets added to a blocked Queue in the dispatcher, to avoid useless Processor Computation Time Allocation.</p> <p>When a process frees a semaphore (POST), its value is increased by 1 and the next process in the queue is removed from the blocked queue, therefore again being available to be picked by the dispatcher for further processor time allocation.</p> <p>The semaphores are managed directly by the processor object and stored in a dictionnary (to avoid two semaphores with the same name referencing different objects =&gt; this could lead to race conditions, as the semaphores would not guard the access to certain resouces effectively anymore). Semaphores can be controlled using the INIT, SEMWAIT and SEMPOST instructions.</p> <h5 id="process-represents-a-process-around-a-codefile-containing-a-sequence-of-instructions">Process (represents a process around a codefile containing a sequence of instructions)</h5> <p>As commonly known in Operating Systems, processes are programs in execution. In our case, we manage the register backups from the CPU if the process is not currently active, we manage which line in the code is currently executed and much more. Furthermore, any instruction is run through the process by calling the corresponding function in the processor (that emulates a CPU).</p> <h5 id="processor-a-simple-cpu-emulation">Processor (a simple CPU emulation)</h5> <p>In our small ecosystem, we have a processor that has 8 registers (from “A” to “H”). Furthermore, two flags can be enabled, the “Z” flag if the result of the previous operation was equal to the numerical value 0, or the “N” flag, if the result of the previous operation was a negative value. Those flags are either set to true or false, while the registers can all take an integer as value.</p> <p>Any instruction that a process runs from the program file is run on the processor, by calling its corresponding function on the processor object. Those functions directly address the registers, flags and the RAM/ROM or semaphore objects, if they are used by the current instruction. Furthermore, the processor can import and export its register, therefore allowing a process to load the current status of the processor before the processor for instance switched to another process (having other values for each register).</p> <h5 id="dispatcher-the-core-of-jeffos">Dispatcher (the core of JeffOS)</h5> <p>The dispatcher controls which processes are currently active, blocked (for instance waiting for a sempahore) or suspended. Right now, processed are run one after another, depending on the order that they got added to the dispatcher. To allow multiple processed to run “simultanously” or to simulate parallel execution, different scheduling algorithms could be implemented (Round Robin for instance)</p> <p>The Dispatcher is the component, that could be expanded the most, as for now, programs are just run sequentially, one after another, without switching between processed.</p> <p><br></p> <h4 id="instructions--program-files">Instructions / Program files</h4> <p>To control the processor, different instructions are available, each being described in the “INSTRUCTIONS” file.</p> <h4 id="concrete-example">Concrete example</h4> <p>A simple program, located in “Programs/ProgramD” is available to compute the n-th Fibonacci value. To do so, the user has to preload the value of n into the first (0-th) position of the ROM. This valus is read at the beginning of the program execution. The result of the program is written in ROM position 1023.</p> <p>The ROM is always printed to STDOUT once no more programs have to be run (see __init__.py)</p> <h4 id="run-it-yourself">Run it yourself</h4> <p>In order to run the JeffOS simulation yourself, start by cloning the repository, and writing your own program (for instance in the “/Programs” directory. To execute the program, add it (remove for instance the ProgramD) in the init file, and wait for the program to finish executing. The ROM will be printed out to STDOUT, allowing you to take a glance at the output of your program (as long as you use the WRITE instruction at some point).</p> <h4 id="further-work">Further work</h4> <p>The project could be greatly enhanced by adding further instructions, coming closer to typical assembly instructions for instance available in RISC systems (for instance take a look at https://marks.page/riscv/). Furthermore implementing scheduling algorithms with different strategies, as well as short/mid/long term scheduling, would allow for different programs to run in “parallel” (or at least not sequential but each for a number of instructions before the dispatcher sets another process as the active process and allows it to run some instructions itself).</p> <p>Feel free to create a Pull Request if you want to contribute, or to report any issues by creating a new Issue.</p> <p>DISCLAIMER: This project was coded quickly and was not thoroughly tested. It was intended as a fun project to apply in a more practical context some concepts I learned in an Operating Systems class at TU Vienna.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Geoffrey Karnbach. Last updated: August 29, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"About",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-news",title:"News",description:"",section:"Navigation",handler:()=>{window.location.href="/news/"}},{id:"nav-projects",title:"Projects",description:"A selection of some of my projects",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-github",title:"GitHub",description:"",section:"Navigation",handler:()=>{window.location.href="/github/"}},{id:"nav-cv",title:"CV",description:"TODO",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"news-lt-u-gt-working-at-tu-wien-as-fullstack-engineer-since-august-2024-lt-u-gt-lt-br-gt-working-on-lt-a-href-quot-https-damap-org-quot-gt-damap-lt-a-gt-using-the-quarkus-framework-and-angular-in-the-frontend",title:"&lt;u&gt;Working at TU Wien as FullStack Engineer since August 2024!&lt;/u&gt;&lt;br /&gt;Working on &lt;a href=&quot;https://damap.org/&quot;&gt;DAMAP&lt;/a&gt; using the Quarkus Framework and Angular in the Frontend!",description:"",section:"News"},{id:"news-lt-u-gt-titanic-survival-prediction-will-john-doe-survive-the-titanic-probably-not-lt-u-gt-lt-br-gt-check-out-lt-a-href-quot-https-geoffreykarnbach-github-io-projects-titanic-survival-analysis-quot-gt-the-project-page-lt-a-gt-lt-a-href-quot-https-github-com-geoffreykarnbach-titanic-survival-analysis-quot-gt-the-source-code-lt-a-gt-and-lt-a-href-quot-https-titanic-survival-analysis-vercel-app-quot-gt-the-live-demo-lt-a-gt",title:"&lt;u&gt;Titanic Survival Prediction - Will John Doe survive the titanic? - Probably not!&lt;/u&gt;&lt;br /&gt;Check out &lt;a href=&quot;https://geoffreykarnbach.github.io/projects/titanic_survival_analysis/&quot;&gt;the project page&lt;/a&gt;, &lt;a href=&quot;https://github.com/GeoffreyKarnbach/Titanic-Survival-Analysis&quot;&gt;the source code&lt;/a&gt; and &lt;a href=&quot;https://titanic-survival-analysis.vercel.app/&quot;&gt;the live demo&lt;/a&gt;!",description:"",section:"News"},{id:"projects-cryptopay",title:"CryptoPay",description:"CryptoPay, a simple initiative to allow paying with cryptocurrencies in a physical location, as simply as with a credit card.",section:"Projects",handler:()=>{window.location.href="/projects/cryptopay/"}},{id:"projects-fake-news-detector-ai",title:"Fake News Detector AI",description:"Detect if a specific article is a fake news or not.",section:"Projects",handler:()=>{window.location.href="/projects/fake_news_detector/"}},{id:"projects-gym-companion-app",title:"Gym Companion App",description:"Transform your workouts with the Gym Companion App \u2013 track, analyze, and optimize your progress seamlessly!",section:"Projects",handler:()=>{window.location.href="/projects/gym_companion_app/"}},{id:"projects-jeffos",title:"JeffOS",description:"JeffOS, an interactive and educational virtual CPU and OS environment!",section:"Projects",handler:()=>{window.location.href="/projects/jeff_os/"}},{id:"projects-l\xe4ndr",title:"L\xe4ndr",description:"Your go-to platform for easily finding and booking the best party locations.",section:"Projects",handler:()=>{window.location.href="/projects/laendr/"}},{id:"projects-python-datastructures",title:"Python Datastructures",description:"Collection of self-implemented datastructure with python, including a Queue, Stack, BST, Hashmap, LL, Heap...",section:"Projects",handler:()=>{window.location.href="/projects/python_datastructures/"}},{id:"projects-recipe-planer",title:"Recipe Planer",description:"Your all-in-one digital cookbook and smart grocery planner for seamless meal preparation and shopping!",section:"Projects",handler:()=>{window.location.href="/projects/recipe_planer/"}},{id:"projects-spotify-language-detection",title:"Spotify Language Detection",description:"Effortlessly organize your Spotify playlist by song language with our own language detection model.",section:"Projects",handler:()=>{window.location.href="/projects/spotify_language_detection/"}},{id:"projects-task-automation",title:"Task automation",description:"Effortlessly schedule and manage your Python scripts without the hassle of cron jobs!",section:"Projects",handler:()=>{window.location.href="/projects/task_automation/"}},{id:"projects-titanic-survival-prediction",title:"Titanic Survival Prediction",description:"Titanic Survival Prediction - Will John Doe survive the titanic? - Probably not!",section:"Projects",handler:()=>{window.location.href="/projects/titanic_survival_analysis/"}},{id:"projects-vienna-subway-simulation",title:"Vienna Subway Simulation",description:"Vienna Subway Simulation - Navigate Vienna&#39;s subway like a pro with our simulation, powered by the Dijkstra Algorithm for the shortest routes!",section:"Projects",handler:()=>{window.location.href="/projects/vienna_subway_simulation/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%67%65%6F%66%66%72%65%79.%6B%61%72%6E%62%61%63%68@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/GeoffreyKarnbach","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/geoffrey-karnbach-b849101b9","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>